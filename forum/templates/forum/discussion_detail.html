{% extends "base.html" %}

{% block content %}
<h1>{{ discussion.title }}</h1>

<h2>Posts</h2>
{% if discussion.posts.all %}
  <ul>
    {% for post in discussion.posts.all %}
      <li>
        <strong>{{ post.author.username }}:</strong> {{ post.content }}
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p>No posts yet.</p>
{% endif %}

{% if user.is_authenticated %}
    <div>
        <h2>Add a new post</h2>
        <form method="post" action="{% url 'forum:create_post' discussion.id %}">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="btn btn-primary">Add Post</button>
        </form>
    </div>
{% endif %}

{% endblock %}
